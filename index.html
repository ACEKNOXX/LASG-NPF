<!DOCTYPE html>
<html>

<head>
	<title>LASG NPF Emergency Numbers</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link rel="icon" href="imgs/npf.png" >
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
		integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Nunito:200,600" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" href="css/index.css">

</head>

<body>

	<div class="container">
		<div class="header">
			<div>
				<img src="imgs/police.png" class="logo" alt="Nigeria police" id="npf">
			</div>
			<div class="header-text-wrapper">
				<h2 class="header-text">Emergency Numbers Lagos State Police Command</h2>
			</div>

			<!-- <div class="theme-switch-wrapper justify-content-end">
				<label class="theme-switch" for="checkbox">
					<input type="checkbox" id="checkbox" />
					<div class="slider round"></div>
				</label>
				<p>Enable Dark Mode!</p>
			</div> -->
		</div>
		<fieldset class="">
			<input type="text" class="form-control" id="search" placeholder="search by name or area in Lagos">
			<div id="content">

			</div>


		</fieldset>
<button id="butInstall" aria-label="Install" hidden></button>
	</div>
</body>
<script type="text/javascript" src="js/index.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	crossorigin="anonymous"></script>
<script>

	let filtered;
	let cont = document.querySelector('#content')
	const search = document.querySelector('#search')

	fetch('http://emajency.com/js/numbers.json')
		.then((response) => {
			return response.json();
			// console.log(response)
		})
		.then((data) => {
			let res = search.value
			for (var key in data) {
				let badge = document.createElement('div');
				// console.log(data[key].name)

				badge.innerHTML = '<div class="card text-center"><h5 class="">' + data[key].name + '<a href="tel:' + data[key].number + '" class="hvr-grow"><i class="fa fa-phone fa-4x call" aria-hidden="true"></i></a></div></h5><br>'
				cont.appendChild(badge)

			}
			search.addEventListener('input', function () {
				let ee = search.value.toUpperCase()
				filtered = data.filter(el => el.name.includes(ee));
				// console.log(filtered)    	
				if (search) { cont.innerHTML = '' }
				for (var key in filtered) {
					let b = document.createElement('div');
					b.innerHTML = '<div class="card text-center"><h5 class="">' + filtered[key].name + '<a href="tel:' + filtered[key].number + '" class="hvr-grow"><i class="fa fa-phone " aria-hidden="true"></i></a></div></h5><br>'
					cont.appendChild(b)
					// console.log(filtered);
				}

			})

		});

 if ('serviceWorker' in navigator) {
	window.addEventListener('load',()=>{
		navigator.serviceWorker.register('/sw.js')
		.then((reg)=>{
			console.log('serviceWorker installed',reg)
		})
	})
  }
</script>

</html>
